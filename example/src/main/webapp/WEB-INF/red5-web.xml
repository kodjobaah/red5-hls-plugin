<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:cdi="http://www.jboss.org/schema/seam/spring"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.jboss.org/schema/seam/spring http://localhost/seam-spring-3.1.xsd">

	<bean id="web.context" class="org.red5.server.Context" autowire="byType" />

	<bean id="web.scope" class="org.red5.server.scope.WebScope"
		init-method="register">
		<property name="server" ref="red5.server" />
		<property name="parent" ref="global.scope" />
		<property name="context" ref="web.context" />
		<property name="handler" ref="application" />
		<property name="contextPath" value="/hlsapp" />
		<property name="virtualHosts" value="*" />
	</bean>

	<bean id="schedulingService" class="org.red5.server.scheduling.ApplicationSchedulingService" />

	<bean id="web.handler" class="org.red5.hlsapp.Application" />


	<bean id="segmenter.service" class="org.red5.service.httpstream.SegmenterService">

		<!-- Thread executor -->
		<property name="segmentExecutor" ref="segmentExecutor" />
		<!-- Length of a segment in milliseconds -->
		<property name="segmentTimeLimit" value="2000" />
		<!-- Store segments (.ts) in memory -->
		<property name="memoryMapped" value="false" />
		<!-- Directory where segments and playlist files are stored -->
		<property name="segmentDirectory" value="/usr/local/src/red5-read-only/target/red5-server-1.0.2-RC4/webapps/hlsapp/WEB-INF/segments/" />
		<!-- Maximum segments to keep in a segment facade -->
		<property name="maxSegmentsPerFacade" value="8" />
		<!-- <property name="outputAudioCodec" value="libmp3lame" /> -->
		<property name="outputVideoCodec" value="libx264" />
	</bean>

	<bean id="segmentExecutor" scope="prototype"
		class="org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler">
		<property name="poolSize" value="4" />
		<property name="waitForTasksToCompleteOnShutdown" value="false" />
		<property name="daemon" value="true" />
		<property name="threadNamePrefix" value="SegmentExecutor-" />
	</bean>

</beans>
